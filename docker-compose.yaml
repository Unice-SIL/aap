version: '3.7'
services:
    database:
        image: 'mariadb:10.3.34'
        environment:
            MYSQL_ROOT_PASSWORD: password
            MYSQL_DATABASE: main
        ports:
            - '3306'
        volumes:
            - ./dump:/docker-entrypoint-initdb.d
            - persistent:/var/lib/mysql
        networks:
            - default
    phpmyadmin:
        image: phpmyadmin
        restart: always
        depends_on:
            - database
        ports:
            - "9021:80"
        environment:
            PMA_HOST: database
    php:
        build: php
        ports:
            - "9020:8000"
        volumes:
            - .:/app
            - /app/vendor # ignore vendor folder
volumes:
    persistent:


